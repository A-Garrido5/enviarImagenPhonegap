<!DOCTYPE html>

<html>
    <head>

           <script src="jquery.mobile/jquery-1.7.2.min.js"></script>

           <script type="text/javascript" charset="utf-8" src="js/json2.js"></script>
    
                  
            <!--<script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script> -->
            <script type="text/javascript" charset="utf-8" src="jquery.mobile/jquery.mobile-1.4.5.js"></script>
            <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
            <script src='jquery.base64.js'></script>
            <script src="jquery.jsonp-2.1.4.min.js"></script>
        

        <div data-role="page" id="page-home" class="type-interior" data-theme="b">


        <div data-role="header" data-theme="b">


            <h1>PhoneGap</h1>
            
        </div>      
        
    <title>PhoneGap</title>  
    
 <script type="text/javascript">
      

        $('#formulario').submit(function() { 



                var datosUsuario = $("#nombredeusuario").val()
                var datosPassword = $("#clave").val()

                var cripto = window.btoa(datosUsuario+'|'+datosPassword);

                var urlLogin="http://services.macroinside.com/ServicioRTC.svc/ValidarUsuario/"+cripto;  

                localStorage.setItem('user', cripto);
                valor = localStorage.getItem('user');
                

                $.ajax({

                  url: urlLogin,
                  type: "POST",
                  dataType: "json",
                  
                  
                  success: function(data) {
                    
                    alert(JSON.stringify(data));                  
                    

                    var arr_from_json = JSON.parse( JSON.stringify(data) );

                    //alert(eval(json.d));

                    alert(arr_from_json);

                    if(dataType==="json"){
                        alert("soy json");
                    }

                    else{
                        alert("No soy json");
                    }
                                        
                    //$("#resultado").html(respuesta.menu.toString());

                  },

                  error:function (xhr, ajaxOptions, thrownError) {
                     alert(thrownError);
                     alert(JSON.stringify(xhr));
                  }

                });
                    

        });

        

    </script>
    </head>

    <body>
        
        <form id="formulario" >
            <br>
            <label> Usuario </label>
            <input type="text" id="nombredeusuario" value="prueba" name="nombredeusuario" placeholder="Ingrese su nombre de usuario">
  
            <label> Password </label>
            <input type="password" id="clave" name="clave" value="prueba1" placeholder="Ingrese su contrase&ntilde;a">
            <br>
            <input type="submit" text="Ingresar" id="botonLogin">
      
        </form>         
    

    <label id="resultado"></label>
        
        
   <!-- <script type="text/javascript">
       
         "http://services.macroinside.com/ServicioRTC.svc/ValidarUsuario"

        function uploadFromGallery() {

    // Retrieve image file location from specified source
        navigator.camera.getPicture(uploadPhoto,
                                    function(message) { alert('get picture failed'); },
                                    { quality: 10, 
                                    destinationType: navigator.camera.DestinationType.FILE_URI,
                                     }
                                    );

        }

        function uploadPhoto(imageURI) {
            
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1)+'.jpeg';
            options.mimeType="image/jpeg";

            document.getElementById('cameraPic').src=imageURI;

             //$("#cameraPic").src(imageURI);

            var params = new Object();

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(imageURI, 
                encodeURI("http://192.168.1.32/test.php"),
            function (e) {
                alert('success');
                alert(JSON.stringify(e));

            },function (e) {
                alert(JSON.stringify(e));
            },options);

        }
        /// http://services.macroinside.com/ServicioRTC.svc
        ///URL Servicio http://services.macroinside.com/ServicioRest.svc/IngresarRequerimiento/imagen/

    </script>
     -->   
    </body>
</html>
